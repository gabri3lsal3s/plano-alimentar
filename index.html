<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="IkigaiHub - Seu hub completo para saúde e bem-estar">
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="icon" href="icons/icon-192x192.png" type="image/png">
    <title>IkigaiHub - Seu Hub de Saúde</title>
    <style>
      body.loading-auth > div,
      body.loading-auth header,
      body.loading-auth nav,
      body.loading-auth footer { display: none !important; }
      body.loading-auth { background: #121212; }
    </style>
</head>
<body>
    <header>
        <h1>IkigaiHub</h1>
        <h2><i>Seu Hub de Saúde e Bem-estar</i></h2>
        <nav>
            <a href="index.html" class="active">Home</a>
            <a href="plano_alimentar.html">Plano Alimentar</a>
            <a href="tarefas.html">Tarefas</a>
            <a href="notas.html">Notas</a>
            <a href="exercicios.html">Exercícios</a>
        </nav>
    </header>

    <div class="home-columns">
        <section id="plano-alimentar">
            <div>
                <div id="refeicao-atual" class="refeicao-atual">
                    <h4>Refeição Atual</h4>
                    <div id="refeicao-content">
                        <p>Carregando...</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="exercicios">
            <div>
                <div id="exercicio-atual" class="exercicio-atual">
                    <h4>Treino de Hoje</h4>
                    <div id="exercicio-content">
                        <p>Carregando...</p>
                    </div>
                </div>
            </div>
        </section>
    </div>
                    
    <div class="extras-columns">
        <div class="extras-single-column">
            <section id="resumo-dashboard">
                <div class="dashboard-bloco">
                    <h4>Resumo do Dia</h4>
                    <div class="dashboard-links">
                        <a href="tarefas.html" class="dashboard-link">
                            <span>📋</span>
                            <span>Gerenciar Tarefas</span>
                        </a>
                        <a href="notas.html" class="dashboard-link">
                            <span>📝</span>
                            <span>Gerenciar Notas</span>
                        </a>
                        <a href="plano_alimentar.html" class="dashboard-link">
                            <span>🍽️</span>
                            <span>Ver Receitas</span>
                        </a>
                        <a href="exercicios.html" class="dashboard-link">
                            <span>💪</span>
                            <span>Ver Exercícios</span>
                        </a>
                    </div>
                </div>
            </section>
        </div>
    </div>
    
    <footer><p></p></footer>

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
    
    <!-- Módulos existentes (mantidos para compatibilidade) -->
    <script src="supabaseReceitas.js"></script>
    <script src="supabasePreferencias.js"></script>
    
    <!-- Novo sistema MVC -->
    <script type="module" src="app.js"></script>
    
    <!-- Scripts de fallback para funcionalidades existentes -->
    <script>
        // Funções de fallback para manter compatibilidade
        function getRefeicaoAtual() {
            const agora = new Date();
            const hora = agora.getHours();
            
            if (hora >= 7 && hora < 9) return 'cafe';
            if (hora >= 9 && hora < 11) return 'lancheM';
            if (hora >= 12 && hora < 14) return 'almoco';
            if (hora >= 15 && hora < 17) return 'lancheT';
            if (hora >= 19 && hora < 21) return 'janta';
            if (hora >= 21 || hora < 7) return 'ceia';
            if (hora >= 11 && hora < 12) return 'almoco';
            if (hora >= 14 && hora < 15) return 'lancheT';
            if (hora >= 17 && hora < 19) return 'janta';
            return 'ceia';
        }
        
        function getExercicioAtual() {
            const agora = new Date();
            const diaSemana = agora.getDay();
            switch(diaSemana) {
                case 1: return 'segunda';
                case 2: return 'terca';
                case 3: return 'quarta';
                case 4: return 'quinta';
                case 5:
                case 6:
                case 0:
                default: return 'adicional';
            }
        }
        
        // Dados de fallback caso o fetch falhe
        const dadosFallback = {
            refeicoes: {
                cafe: { 
                    nome: "Café da Manhã", 
                    horario: "07h às 09h", 
                    receitas: [
                        { 
                            titulo: "Omelete Proteica Completa", 
                            ingredientes: ["3 ovos inteiros", "30g de queijo cottage", "1 fatia de pão integral", "1 colher de sopa de azeite", "Espinafre, tomate e temperos"], 
                            preparo: "Bata os ovos, adicione o cottage e refogue com azeite. Sirva com pão integral e vegetais", 
                            calorias: "~520 kcal, 28g proteína, 35g carboidratos, 28g gorduras" 
                        },
                        {
                            titulo: "Mingau de Aveia Proteico",
                            ingredientes: ["50g de aveia em flocos", "200ml de leite integral", "1 banana média", "15g de castanha-do-Pará", "1 colher de mel"],
                            preparo: "Cozinhe a aveia no leite, adicione a banana amassada e finalize com castanhas e mel",
                            calorias: "~580 kcal, 22g proteína, 65g carboidratos, 22g gorduras"
                        }
                    ]
                },
                lancheM: { 
                    nome: "Lanche da Manhã", 
                    horario: "09h às 11h", 
                    receitas: [
                        { 
                            titulo: "Iogurte Grego com Frutas", 
                            ingredientes: ["150g de iogurte grego natural", "1 banana pequena", "15g de granola", "10g de mel"], 
                            preparo: "Misture o iogurte com a banana cortada, adicione granola e mel", 
                            calorias: "~380 kcal, 18g proteína, 52g carboidratos, 12g gorduras" 
                        },
                        {
                            titulo: "Sanduíche Natural Proteico",
                            ingredientes: ["2 fatias de pão integral", "50g de atum em lata", "1 ovo cozido", "Folhas verdes e tomate", "1 colher de chá de azeite"],
                            preparo: "Monte o sanduíche com todos os ingredientes, temperando com azeite",
                            calorias: "~350 kcal, 22g proteína, 35g carboidratos, 15g gorduras"
                        }
                    ]
                },
                almoco: { 
                    nome: "Almoço", 
                    horario: "12h às 14h", 
                    receitas: [
                        { 
                            titulo: "Prato Principal Completo", 
                            ingredientes: ["150g de peito de frango grelhado", "100g de arroz integral cozido", "80g de feijão preto", "150g de macaxeira cozida", "Salada de folhas verdes com azeite", "Legumes refogados"], 
                            preparo: "Grelhe o frango, prepare o arroz e feijão, cozinhe a macaxeira e monte o prato com todos os componentes", 
                            calorias: "~750 kcal, 35g proteína, 85g carboidratos, 20g gorduras" 
                        },
                        {
                            titulo: "Purê de Macaxeira com Carne Moída",
                            ingredientes: ["300g de macaxeira cozida", "150g de carne moída magra", "50g de queijo cottage", "1 colher de azeite", "Cebola, alho e temperos"],
                            preparo: "Cozinhe a macaxeira e amasse formando purê. Refogue a carne com temperos. Monte em camadas com queijo cottage e gratine",
                            calorias: "~450 kcal, 30g proteína, 55g carboidratos, 12g gorduras"
                        }
                    ]
                },
                lancheT: { 
                    nome: "Lanche da Tarde", 
                    horario: "15h às 17h", 
                    receitas: [
                        { 
                            titulo: "Smoothie Proteico Pós-Treino", 
                            ingredientes: ["25g de whey protein", "200ml de leite integral", "1 banana", "30g de aveia", "Canela a gosto"], 
                            preparo: "Bata todos os ingredientes no liquidificador até ficar homogêneo", 
                            calorias: "~390 kcal, 28g proteína, 45g carboidratos, 8g gorduras" 
                        },
                        {
                            titulo: "Batata Doce com Atum",
                            ingredientes: ["150g de batata doce assada", "1 lata de atum em água (140g)", "1 colher de chá de azeite", "Temperos verdes"],
                            preparo: "Asse a batata doce, misture o atum com azeite e temperos, e sirva sobre a batata",
                            calorias: "~320 kcal, 25g proteína, 35g carboidratos, 8g gorduras"
                        }
                    ]
                },
                janta: { 
                    nome: "Janta", 
                    horario: "19h às 21h", 
                    receitas: [
                        { 
                            titulo: "Sopa Proteica de Frango", 
                            ingredientes: ["150g de peito de frango", "100g de macaxeira", "50g de cenoura", "30g de abobrinha", "1 colher de azeite", "Temperos verdes"], 
                            preparo: "Cozinhe o frango, adicione os legumes e macaxeira. Tempere e sirva quente", 
                            calorias: "~420 kcal, 35g proteína, 45g carboidratos, 12g gorduras" 
                        },
                        {
                            titulo: "Omelete de Queijo Cottage",
                            ingredientes: ["3 ovos", "50g de queijo cottage", "30g de espinafre", "1 colher de azeite", "Sal e pimenta"],
                            preparo: "Bata os ovos, adicione o cottage e espinafre. Refogue com azeite até firmar",
                            calorias: "~380 kcal, 28g proteína, 5g carboidratos, 25g gorduras"
                        }
                    ]
                },
                ceia: { 
                    nome: "Ceia", 
                    horario: "21h às 23h", 
                    receitas: [
                        { 
                            titulo: "Iogurte com Aveia", 
                            ingredientes: ["150g de iogurte grego", "20g de aveia", "10g de mel", "Canela a gosto"], 
                            preparo: "Misture o iogurte com aveia, mel e canela. Consuma antes de dormir", 
                            calorias: "~280 kcal, 18g proteína, 35g carboidratos, 8g gorduras" 
                        },
                        {
                            titulo: "Chá com Castanhas",
                            ingredientes: ["1 xícara de chá verde", "15g de castanha-do-Pará", "1 colher de mel"],
                            preparo: "Prepare o chá, adicione as castanhas e mel. Consuma antes de dormir",
                            calorias: "~180 kcal, 5g proteína, 15g carboidratos, 12g gorduras"
                        }
                    ]
                }
            },
            exercicios: {
                segunda: {
                    nome: "Segunda-feira - Treino A (Superior)",
                    exercicios: [
                        "Supino Reto: 4x8-10",
                        "Desenvolvimento com Halteres: 4x8-10",
                        "Remada Curvada: 4x8-10",
                        "Elevação Lateral: 3x10-12",
                        "Tríceps Corda: 3x10-12",
                        "Bíceps Martelo: 3x10-12"
                    ]
                },
                terca: {
                    nome: "Terça-feira - Treino B (Inferior)",
                    exercicios: [
                        "Agachamento Livre: 4x8-10",
                        "Leg Press: 4x8-10",
                        "Extensão de Pernas: 3x10-12",
                        "Flexão de Pernas: 3x10-12",
                        "Elevação de Panturrilha: 4x12-15",
                        "Abdominal Crunch: 3x15-20"
                    ]
                },
                quarta: {
                    nome: "Quarta-feira - Descanso/Cardio",
                    exercicios: [
                        "Cardio leve (caminhada ou bike): 30-45 min",
                        "Alongamento: 15-20 min",
                        "Descanso ativo"
                    ]
                },
                quinta: {
                    nome: "Quinta-feira - Treino C (Superior)",
                    exercicios: [
                        "Supino Inclinado: 4x8-10",
                        "Puxada na Frente: 4x8-10",
                        "Elevação Frontal: 3x10-12",
                        "Remada Baixa: 4x8-10",
                        "Rosca Direta: 3x10-12",
                        "Tríceps Testa: 3x10-12"
                    ]
                },
                sexta: {
                    nome: "Sexta-feira - Treino D (Inferior)",
                    exercicios: [
                        "Agachamento Sumô: 4x8-10",
                        "Stiff: 4x8-10",
                        "Avanço: 3x10-12 (cada perna)",
                        "Extensão de Pernas: 3x10-12",
                        "Elevação de Panturrilha Sentado: 4x12-15",
                        "Prancha: 3x30-60 segundos"
                    ]
                },
                adicional: {
                    nome: "Fim de Semana - Cardio/Descanso",
                    exercicios: [
                        "Cardio moderado: 45-60 min",
                        "Alongamento: 20-30 min",
                        "Descanso e recuperação",
                        "Atividades recreativas"
                    ]
                }
            }
        };

        // Função para exibir refeição atual (fallback)
        function exibirRefeicaoAtual() {
            const refeicaoAtual = getRefeicaoAtual();
            const refeicaoContent = document.getElementById('refeicao-content');
            
            if (refeicaoContent && dadosFallback.refeicoes[refeicaoAtual]) {
                const refeicao = dadosFallback.refeicoes[refeicaoAtual];
                const receita = refeicao.receitas[0]; // Primeira receita da seção
                
                refeicaoContent.innerHTML = `
                    <div class="refeicao-info">
                        <h5>${refeicao.nome}</h5>
                        <h6>${refeicao.horario}</h6>
                        <p><strong>${receita.titulo}</strong></p>
                        <ul>
                            ${receita.ingredientes.map(ingrediente => `<li>${ingrediente}</li>`).join('')}
                        </ul>
                        <p><strong>Preparo:</strong> ${receita.preparo}</p>
                        <p><strong>Calorias:</strong> ${receita.calorias}</p>
                    </div>
                `;
            }
        }

        // Função para exibir exercício atual (fallback)
        function exibirExercicioAtual() {
            const exercicioAtual = getExercicioAtual();
            const exercicioContent = document.getElementById('exercicio-content');
            
            if (exercicioContent && dadosFallback.exercicios[exercicioAtual]) {
                const exercicio = dadosFallback.exercicios[exercicioAtual];
                
                exercicioContent.innerHTML = `
                    <div class="exercicio-info">
                        <h5>${exercicio.nome}</h5>
                        <ul>
                            ${exercicio.exercicios.map(ex => `<li>${ex}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
        }

        // Executa fallbacks se o sistema MVC não estiver disponível
        setTimeout(() => {
            if (!window.app) {
                console.log('Sistema MVC não disponível, usando fallbacks...');
                exibirRefeicaoAtual();
                exibirExercicioAtual();
            }
        }, 2000);
    </script>
</body>
</html> 